(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{345:function(t,e,r){},396:function(t,e,r){"use strict";var _=r(345);r.n(_).a},404:function(t,e,r){"use strict";r.r(e);var _=r(0),n=r(12),o=r.n(n),v=r(9),d={props:["order"],data:function(){return{payment_list:!1}},computed:Object(_.a)({},Object(v.b)({sessid:"user/getSessid"})),methods:{prev:function(){this.payment_list=!1},toPay:function(t,e){window.open("/api/v1/payment/?ORDER_ID=".concat(t,"&PAYMENT_ID=").concat(e),"Оплата","width=600,height=400")},changeToPay:function(t,e,r){var _={"orderData[order]":t,"orderData[payment]":e,"orderData[paySystemId]":r,"orderData[allow_inner]":"N","orderData[refresh_prices]":"N","orderData[only_inner_full]":"Y",sessid:this.sessid};this.$axios.post("/api/v1/changepayment/",o.a.stringify(_)).then(function(t){var e=window.open("","Оплата","width=600,height=400");e.onload=function(){var div=e.document.createElement("div"),body=e.document.body;div.innerHTML=t.data,body.insertBefore(div,body.firstChild)}})},changePayment:function(t,e){var r=this,_={"orderData[order]":t,"orderData[payment]":e,"orderData[allow_inner]":"N","orderData[refresh_prices]":"N","orderData[only_inner_full]":"Y",sessid:this.sessid};this.$axios.post("/api/v1/changepayment/",o.a.stringify(_)).then(function(t){console.log(t.data.PAYSYSTEMS_LIST),t.data.PAYSYSTEMS_LIST&&(r.payment_list=t.data.PAYSYSTEMS_LIST)})}}},c=r(5),l=Object(c.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-order__block"},[r("div",{staticClass:"user-order__header"},[t._v("Параметры оплаты")]),t._v(" "),r("div",{staticClass:"user-order__body"},[r("div",{staticClass:"user-order__heading"},[r("div",{staticClass:"user-order__payment-icon"}),t._v(" "),r("div",[r("p",[t._v("Заказ №"+t._s(t.order.ACCOUNT_NUMBER)+" от "+t._s(t.order.DATE_INSERT_FORMATED)+", "+t._s(t.order.STATUS.NAME))]),t._v(" "),r("p",[t._v("Сумма заказа: "+t._s(t.order.PRICE_FORMATED))])])]),t._v(" "),t._l(t.order.PAYMENT,function(e,_){return[r("div",{key:_,staticClass:"user-order__info"},[r("img",{attrs:{src:t.order.PAY_SYSTEM.SRC_LOGOTIP,alt:""}}),t._v(" "),r("div",[r("p",[r("b",[t._v("Счет №"+t._s(e.ACCOUNT_NUMBER)+" от "+t._s(e.DATE_BILL)+", "+t._s(t.order.NAME))]),t._v(" "),"Y"===t.order.PAYED?r("span",{staticClass:"s-orders__status green"},[t._v("Оплачено")]):r("span",{staticClass:"s-orders__status red"},[t._v("Не оплачено")])]),t._v(" "),r("p",[t._v("Сумма к оплате по счету: "+t._s(t.order.PRICE_FORMATED))])])]),t._v(" "),r("div",{key:e.ACCOUNT_NUMBER,staticClass:"s-orders__payment mb-3"},[r("div",{directives:[{name:"show",rawName:"v-show",value:0==t.payment_list&&"Y"!==t.order.PAYED,expression:"payment_list == false && order.PAYED !== 'Y'"}]},[r("button",{staticClass:"s-orders__change btn-simple mb-2",attrs:{type:"button"},on:{click:function(r){return t.changePayment(t.order.ACCOUNT_NUMBER,e.ACCOUNT_NUMBER)}}},[t._v("\n                        Сменить способ оплаты\n                    ")]),t._v(" "),r("br"),t._v(" "),r("button",{staticClass:"button black bold",attrs:{type:"button"},on:{click:function(r){return t.toPay(t.order.ACCOUNT_NUMBER,e.ACCOUNT_NUMBER)}}},[t._v("Оплатить")])]),t._v(" "),t.payment_list?r("div",[r("div",{staticClass:"s-orders__payment-wrapper"},t._l(t.payment_list,function(_,n){return r("label",{key:n,staticClass:"o-radio o-radio--img"},[r("input",{attrs:{name:"PAY_SYSTEM_ID",type:"radio"},on:{click:function(r){return t.changeToPay(t.order.ACCOUNT_NUMBER,e.ACCOUNT_NUMBER,_.ID)}}}),t._v(" "),r("img",{attrs:{src:_.LOGOTIP,alt:""}}),t._v(" "),r("span",[t._v(t._s(_.PSA_NAME))]),t._v(" "),r("div",{staticClass:"o-radio__border"})])}),0),t._v(" "),r("button",{staticClass:"btn-simple",attrs:{type:"button"},on:{click:t.prev}},[t._v("Назад")])]):t._e()])]})],2)])},[],!1,null,null,null).exports,m=r(62),C={props:["item"]},E=Object(c.a)(C,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"basket-item cart__item"},[r("div",{staticClass:"basket-item__info"},[r("div",{staticClass:"basket-item__img"},[t.item.DETAIL_PICTURE_SRC?r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.item.DETAIL_PICTURE_SRC,expression:"item.DETAIL_PICTURE_SRC"}],attrs:{alt:""}}):r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/bitrix/components/bitrix/catalog/templates/.default/bitrix/catalog.section/.default/images/no_photo.png",expression:"'/bitrix/components/bitrix/catalog/templates/.default/bitrix/catalog.section/.default/images/no_photo.png'"}],attrs:{alt:""}})]),t._v(" "),r("div",{staticClass:"basket-item__offers"},[r("nuxt-link",{staticClass:"basket-item__name",class:{"mt-0":!t.item.SKU_BLOCK_LIST},attrs:{to:"#0"}},[t._v(t._s(t.item.NAME))]),t._v(" "),t._l(t.item.SKU_BLOCK_LIST,function(e){return r("div",{key:e.ID,ref:"sku_line_block",refInFor:!0,staticClass:"item__offers"},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[t._l(e.SKU_VALUES_LIST,function(e){return[e.SELECTED?r("li",{key:e.ID,class:{img:e.PICT},attrs:{"data-value":e.ID}},[e.PICT&&0!==e.PICT.ID?r("img",{attrs:{src:e.PICT,alt:"",title:e.NAME}}):t._e(),t._v(" "),e.PICT&&0!=e.PICT.ID?t._e():r("span",[t._v(t._s(e.NAME))])]):t._e()]})],2)])})],2)]),t._v(" "),r("div",{staticClass:"basket-item__price"},[t._v(t._s(t.item.PRICE_FORMATED))]),t._v(" "),r("div",{staticClass:"basket-item__discount"},[t._v(t._s(t.item.DISCOUNT_PRICE_PERCENT_FORMATED))]),t._v(" "),r("div",{staticClass:"basket-item__summ"},[t._v(t._s(t.item.FORMATED_SUM))]),t._v(" "),r("div",{staticClass:"basket-item__actions"},[r("div",[t._v(t._s(t.item.QUANTITY))])])])},[],!1,null,null,null).exports,f={props:["order"],data:function(){return{tabOpened:!1}},methods:{getBasket:function(t){return this.order.BASKET[t]}},components:{OrderItem:E}},h=Object(c.a)(f,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-order__block"},[r("div",{staticClass:"user-order__header"},[t._v("Параметры отгрузки")]),t._v(" "),t._l(t.order.SHIPMENT,function(e,_){return r("div",{key:_,staticClass:"user-order__body"},[r("div",{staticClass:"user-order__info"},[r("img",{attrs:{src:e.DELIVERY.SRC_LOGOTIP,alt:""}}),t._v(" "),r("div",[r("p",[r("b",[t._v("Отгрузка №"+t._s(e.ACCOUNT_NUMBER)+", стоимость доставки "+t._s(e.PRICE_DELIVERY_FORMATED))])]),t._v(" "),r("p",[t._v("Служба доставки: "+t._s(e.DELIVERY_NAME))]),t._v(" "),r("p",[t._v("Статус отгрузки: "+t._s(e.STATUS_NAME))])])]),t._v(" "),r("div",{staticClass:"s-orders__payment mb-3"},[r("div",{directives:[{name:"show",rawName:"v-show",value:0==t.tabOpened,expression:"tabOpened == false"}]},[r("button",{staticClass:"s-orders__change btn-simple mb-2",attrs:{type:"button"},on:{click:function(e){t.tabOpened=!0}}},[t._v("показать все")]),t._v(" "),r("br")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.tabOpened,expression:"tabOpened != false"}]},[t._m(0,!0),t._v(" "),r("div",{staticClass:"cart__items"},t._l(e.ITEMS,function(e,_){return r("order-item",{key:_,attrs:{item:t.getBasket(e.BASKET_ID)}})}),1),t._v(" "),r("button",{staticClass:"btn-simple",attrs:{type:"button"},on:{click:function(e){t.tabOpened=!1}}},[t._v("Свернуть")])])])])})],2)},[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart__heading"},[r("b",{staticClass:"cart__info"},[t._v("Товары")]),t._v(" "),r("b",{staticClass:"cart__price"},[t._v("Цена")]),t._v(" "),r("b",{staticClass:"cart__discount"},[t._v("Скидка")]),t._v(" "),r("b",{staticClass:"cart__summ"},[t._v("Сумма")]),t._v(" "),r("b",{staticClass:"cart__actions"},[t._v("Количество")])])}],!1,null,null,null).exports,T={props:["info","items"],components:{OrderItem:E}},A=Object(c.a)(T,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-order__block"},[e("div",{staticClass:"user-order__header"},[this._v("Содержимое заказа")]),this._v(" "),e("div",{staticClass:"user-order__body"},[e("div",{staticClass:"s-orders__payment mb-3"},[this._m(0),this._v(" "),e("div",{staticClass:"cart__items"},this._l(this.items,function(t,r){return e("order-item",{key:r,attrs:{item:t}})}),1)])])])},[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart__heading"},[r("b",{staticClass:"cart__info"},[t._v("Товары")]),t._v(" "),r("b",{staticClass:"cart__price"},[t._v("Цена")]),t._v(" "),r("b",{staticClass:"cart__discount"},[t._v("Скидка")]),t._v(" "),r("b",{staticClass:"cart__summ"},[t._v("Сумма")]),t._v(" "),r("b",{staticClass:"cart__actions"},[t._v("Количество")])])}],!1,null,null,null).exports,I={middleware:"auth",mixins:[m.a],data:function(){return{showInfo:!1}},components:{OrderPayment:l,OrderDelivery:h,OrderContent:A},asyncData:function(t){var e=t.params,r=t.$axios,_=t.error;return r.get("/api/v1/order/list/element/?ORDER_ID=".concat(e.id)).then(function(t){return console.log(t.data),{order:t.data}}).catch(function(t){404===t.response.status&&_({statusCode:404,message:t.message})})}},R=(r(396),Object(c.a)(I,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"content-header"},[r("div",{staticClass:"main-container"},[r("h2",[t._v("Мои заказы")]),t._v(" "),r("ul",{staticClass:"breadcrumbs"},[r("li",[r("nuxt-link",{attrs:{to:"/"}},[t._v("Главная")])],1),t._v(" "),r("li",[r("nuxt-link",{attrs:{to:"/personal"}},[t._v("Мой кабинет")])],1),t._v(" "),r("li",[r("nuxt-link",{attrs:{to:"/personal/orders"}},[t._v("Мои заказы")])],1)])])]),t._v(" "),r("div",{staticClass:"user-order main-container"},[r("h2",[t._v("Мой заказ №"+t._s(t.order.ACCOUNT_NUMBER)+", создан "+t._s(t.order.DATE_INSERT_FORMATED))]),t._v(" "),r("nuxt-link",{staticClass:"user-order__back mb-3",attrs:{to:"/personal/orders"}},[t._v("← Вернуться в список заказов")]),t._v(" "),r("div",{staticClass:"user-order__block"},[r("div",{staticClass:"user-order__header small"},[t._v("\n                Заказ №"+t._s(t.order.ACCOUNT_NUMBER)+" от "+t._s(t.order.DATE_INSERT_FORMATED)+", "+t._s(t.order.count_basket)+" на сумму "+t._s(t.order.PRICE_FORMATED)+"\n            ")])]),t._v(" "),r("div",{staticClass:"user-order__block"},[r("div",{staticClass:"user-order__header"},[t._v("Информация о заказе")]),t._v(" "),r("div",{staticClass:"user-order__body"},[r("div",{staticClass:"user-order__info-table"},[r("div",{staticClass:"user-order__info-row heading"},[r("div",[t._v("Ф.И.О.:")]),t._v(" "),r("div",[t._v("Текущий статус, от "+t._s(t.order.DATE_INSERT_FORMATED)+":")]),t._v(" "),r("div",[t._v("Сумма:")]),t._v(" "),t._m(0)]),t._v(" "),r("div",{staticClass:"user-order__info-row"},[r("div",[r("b",[t._v(t._s(t.order.USER_NAME))])]),t._v(" "),r("div",[r("b",[t._v(t._s(t.order.STATUS.NAME))])]),t._v(" "),r("div",[r("b",[t._v(t._s(t.order.PRICE_FORMATED))])]),t._v(" "),r("div",[r("button",{staticClass:"user-order__repeat btn-simple hidden-desktop mr-2"},[t._v("Повторить заказ")]),t._v(" "),"Y"==t.order.CANCELED?r("button",{staticClass:"user-order__cancel btn-simple"},[t._v("Заказ отменен")]):r("button",{staticClass:"user-order__cancel btn-simple"},[t._v("Отменить")])])])]),t._v(" "),0==t.showInfo?r("button",{staticClass:"btn-simple mt-4",on:{click:function(e){t.showInfo=!0}}},[t._v("Подробнее")]):r("button",{staticClass:"btn-simple mt-4",on:{click:function(e){t.showInfo=!1}}},[t._v("Скрыть")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:1==t.showInfo,expression:"showInfo == true"}],staticClass:"user-order__info-list"},[r("h3",[t._v("Информация о пользователе")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("Логин:")]),t._v(" "),r("p",[t._v(t._s(t.order.USER.LOGIN))])]),t._v(" "),r("li",[r("p",[t._v("E-mail адрес:")]),t._v(" "),r("p",[t._v(t._s(t.order.USER.EMAIL))])]),t._v(" "),r("li",[r("p",[t._v("Тип плательщика:")]),t._v(" "),r("p",[t._v(t._s(t.order.USER.PERSON_TYPE_NAME))])]),t._v(" "),t._l(t.order.ORDER_PROPS,function(e,_){return r("li",{key:_},[r("p",[t._v(t._s(e.NAME)+":")]),t._v(" "),r("p",[t._v(t._s(e.VALUE))])])})],2)])])]),t._v(" "),r("order-payment",{attrs:{order:t.order}}),t._v(" "),r("order-delivery",{attrs:{order:t.order}}),t._v(" "),r("order-content",{attrs:{items:t.order.BASKET}}),t._v(" "),r("div",{staticClass:"user-order__summary"},[t._m(1),t._v(" "),r("div",{staticClass:"ml-3"},[r("p",[t._v(t._s(t.order.PRODUCT_SUM_FORMATED))]),t._v(" "),r("p",[t._v(t._s(t.order.PRICE_DELIVERY_FORMATED))]),t._v(" "),r("p",[t._v(t._s(t.order.PRICE_FORMATED))])])]),t._v(" "),r("nuxt-link",{staticClass:"user-order__back mt-3",attrs:{to:"/personal/orders"}},[t._v("← Вернуться в список заказов")])],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("button",{staticClass:"user-order__repeat btn-simple"},[this._v("Повторить заказ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Товар на:")]),this._v(" "),e("p",[this._v("Стоимость доставки:")]),this._v(" "),e("p",[this._v("Итого:")])])}],!1,null,null,null));e.default=R.exports}}]);