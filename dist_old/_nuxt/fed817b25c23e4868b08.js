(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{327:function(t,e,r){},330:function(t,e,r){"use strict";var o=r(0),n=r(9),_={props:["id"],computed:Object(o.a)({},Object(n.b)({getError:"order/getErrorProperty"}),{message:function(){var t,e=!1;return(t=this.getError(this.id))&&(e=t),e}})},l=r(5),component=Object(l.a)(_,function(){var t=this.$createElement,e=this._self._c||t;return this.message?e("div",{staticClass:"alert-danger order-error mb-1"},[this._v(this._s(this.message))]):this._e()},[],!1,null,null,null);e.a=component.exports},338:function(t,e,r){},339:function(t,e,r){"use strict";var o=r(327);r.n(o).a},340:function(t,e,r){},351:function(t,e,r){"use strict";var o=r(0),n=r(9),_={props:["id"],methods:{setLocation:function(code){document.querySelector('input[name="ORDER_PROP_'+this.id+'"]').value=code,this.$store.dispatch("order/locationShow",!1),this.$root.$emit("refresh")}},computed:Object(o.a)({},Object(n.b)({getLocations:"order/getLocationList",getLocationShow:"order/getLocationShow"}))},l=(r(339),r(5)),c={props:["property"],components:{Search:Object(l.a)(_,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.getLocationShow?r("div",{staticClass:"v-search"},t._l(t.getLocations,function(e){return r("span",{key:e.CODE,on:{click:function(r){return t.setLocation(e.CODE)}}},[t._v(t._s(e.DISPLAY))])}),0):t._e()},[],!1,null,null,null).exports,Error:r(330).a},computed:Object(o.a)({},Object(n.b)({getLocationName:"order/getLocationName"})),data:function(){return{timer:!1}},methods:{locations:function(t,e){var r=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){document.querySelector('input[name="ORDER_PROP_'+e+'"]').value="",r.$store.dispatch("order/locations",t)},300)}}},d=Object(l.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"o-prop textfield"},[r("error",{attrs:{id:t.property.ID}}),t._v(" "),r("p",[t._v(t._s(t.property.NAME)+" "),r("i",[t._v("*")])]),t._v(" "),r("input",{attrs:{type:"hidden",name:"location_type",value:"code"}}),t._v(" "),t._l(t.property.VALUE,function(e,o){return r("div",{key:o},[r("input",{attrs:{type:"hidden",name:"ORDER_PROP_"+t.property.ID},domProps:{value:e}}),t._v(" "),r("input",{staticClass:"o-prop__input",attrs:{placeholder:"Выберите местоположение..."},domProps:{value:t.getLocationName({id:t.property.ID})},on:{input:function(e){return t.locations(e.target.value,t.property.ID)}}})])}),t._v(" "),r("search",{attrs:{id:t.property.ID}})],2)},[],!1,null,null,null);e.a=d.exports},354:function(t,e,r){"use strict";var o=r(62),n=r(130),_={mixins:[o.a],props:{item:Object,postponed:{type:Boolean,default:!1}},computed:{sortProps:function(){var t=JSON.parse(JSON.stringify(this.item.PROPS));return t=t.sort(function(a,b){return a.NAME>b.NAME?-1:a.NAME==b.NAME?0:a.NAME<b.NAME?1:void 0})}},methods:{getPropValue:function(t){return JSON.parse(t)}},components:{Quantity:n.a}},l=r(5),component=Object(l.a)(_,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"basket-item"},[r("div",{staticClass:"basket-item__info"},[r("div",{staticClass:"basket-item__img"},[t.item.PREVIEW_PICTURE_SRC_ORIGINAL?r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.item.PREVIEW_PICTURE_SRC_ORIGINAL,expression:"item.PREVIEW_PICTURE_SRC_ORIGINAL"}],attrs:{alt:""}}):r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/bitrix/components/bitrix/catalog/templates/.default/bitrix/catalog.section/.default/images/no_photo.png",expression:"'/bitrix/components/bitrix/catalog/templates/.default/bitrix/catalog.section/.default/images/no_photo.png'"}],attrs:{alt:""}})]),t._v(" "),r("div",{staticClass:"basket-item__offers"},[r("nuxt-link",{staticClass:"basket-item__name",class:{"mt-0":1==t.postponed||!t.item.SKU_BLOCK_LIST},attrs:{to:t.item.DETAIL_PAGE_URL}},[t._v(t._s(t.item.NAME))]),t._v(" "),0==t.postponed?t._l(t.item.SKU_BLOCK_LIST,function(e){return r("div",{key:e.ID,ref:"sku_line_block",refInFor:!0,staticClass:"item__offers"},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",t._l(e.SKU_VALUES_LIST,function(o){return r("li",{key:o.ID,class:{img:o.PICT,selected:o.SELECTED,"not-available":o.NOT_AVAILABLE_OFFER},attrs:{"data-value":o.ID},on:{click:function(r){return r.preventDefault(),t.changeOffer(t.item.ID,e.CODE,o.VALUE_ID)}}},[o.PICT&&0!==o.PICT.ID?r("img",{attrs:{src:o.PICT,alt:"",title:o.NAME}}):t._e(),t._v(" "),o.PICT&&0!=o.PICT.ID?t._e():r("span",[t._v(t._s(o.NAME))])])}),0)])}):t._e(),t._v(" "),t._l(t.sortProps,function(e){return["right"==e.CODE?r("div",{key:e.CODE,staticClass:"item__offers",staticStyle:{width:"100%"}},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[t.getPropValue(e["~VALUE"]).sph?r("li",{staticClass:"selected"},[r("span",[t._v("sph: "+t._s(t.getPropValue(e["~VALUE"]).sph))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).cyl?r("li",{staticClass:"selected"},[r("span",[t._v("cyl: "+t._s(t.getPropValue(e["~VALUE"]).cyl))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).ax?r("li",{staticClass:"selected"},[r("span",[t._v("ax: "+t._s(t.getPropValue(e["~VALUE"]).ax))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).add?r("li",{staticClass:"selected"},[r("span",[t._v("add: "+t._s(t.getPropValue(e["~VALUE"]).add))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).deg?r("li",{staticClass:"selected"},[r("span",[t._v("deg: "+t._s(t.getPropValue(e["~VALUE"]).deg))])]):t._e()])]):t._e()]}),t._v(" "),t._l(t.sortProps,function(e){return["left"==e.CODE?r("div",{key:e.CODE,staticClass:"item__offers",staticStyle:{width:"100%"}},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[t.getPropValue(e["~VALUE"]).sph?r("li",{staticClass:"selected"},[r("span",[t._v("sph: "+t._s(t.getPropValue(e["~VALUE"]).sph))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).cyl?r("li",{staticClass:"selected"},[r("span",[t._v("cyl: "+t._s(t.getPropValue(e["~VALUE"]).cyl))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).ax?r("li",{staticClass:"selected"},[r("span",[t._v("ax: "+t._s(t.getPropValue(e["~VALUE"]).ax))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).add?r("li",{staticClass:"selected"},[r("span",[t._v("add: "+t._s(t.getPropValue(e["~VALUE"]).add))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).deg?r("li",{staticClass:"selected"},[r("span",[t._v("deg: "+t._s(t.getPropValue(e["~VALUE"]).deg))])]):t._e()])]):t._e()]}),t._v(" "),r("div",{staticStyle:{display:"flex","flex-wrap":"wrap",width:"100%"}},[t._l(t.item.PROPS,function(e,o){return["center_distance_left"==e.CODE||"center_distance_right"==e.CODE?r("div",{key:o,staticClass:"item__offers"},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[r("li",{staticClass:"selected"},[r("span",[t._v(t._s(e["~VALUE"]))])])])]):t._e()]})],2),t._v(" "),t._l(t.item.PROPS,function(e,o){return["service"==e.CODE?r("div",{key:o,staticClass:"item__offers"},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[r("li",{staticClass:"selected"},[r("span",[t._v(t._s(e["~VALUE"]))])])])]):t._e()]})],2)]),t._v(" "),r("div",{staticClass:"basket-item__price"},[t._v(t._s(t.item.PRICE_FORMATED))]),t._v(" "),t.postponed?r("div",{staticClass:"basket-item__discount"},[t._v(t._s(t.item.DISCOUNT_PRICE_PERCENT_FORMATED))]):t._e(),t._v(" "),r("div",{staticClass:"basket-item__summ"},[t._v(t._s(t.item.SUM))]),t._v(" "),r("div",{staticClass:"basket-item__actions"},[t.postponed?r("div",[t._v(t._s(t.item.QUANTITY))]):r("div",[r("quantity",{attrs:{id:t.item.ID,itemname:t.item.NAME}})],1),t._v(" "),r("div",{staticClass:"basket-item__buttons"},[r("div",[r("button",{attrs:{type:"button"},on:{click:function(e){return t.deleteItem(t.item.ID)}}},[t._v("Удалить")])])])])])},[],!1,null,null,null);e.a=component.exports},372:function(t,e,r){"use strict";var o=r(338);r.n(o).a},373:function(t,e,r){"use strict";var o=r(340);r.n(o).a},402:function(t,e,r){"use strict";r.r(e);var o=r(0),n=(r(28),r(4)),_=r(60),l=(r(97),r(63),r(10),r(31),r(9)),c=r(62),d={mixins:[c.a],methods:{getPropValue:function(t){return JSON.parse(t)}}},v=r(5),m=Object(v.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("button",{staticClass:"order__heading mt-0",attrs:{type:"button"}},[t._v("1. Товары")]),t._v(" "),t.getBasket.GRID?t._l(t.getBasket.GRID.ROWS,function(e){return r("div",{key:e.ID,staticClass:"basket-item basket-item--order",attrs:{item:e}},[r("div",{staticClass:"basket-item__info"},[r("div",{staticClass:"basket-item__img"},[e.PREVIEW_PICTURE_SRC_ORIGINAL?r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.PREVIEW_PICTURE_SRC_ORIGINAL,expression:"item.PREVIEW_PICTURE_SRC_ORIGINAL"}],attrs:{alt:""}}):r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/bitrix/components/bitrix/catalog/templates/.default/bitrix/catalog.section/.default/images/no_photo.png",expression:"'/bitrix/components/bitrix/catalog/templates/.default/bitrix/catalog.section/.default/images/no_photo.png'"}],attrs:{alt:""}})]),t._v(" "),r("div",{staticClass:"basket-item__offers"},[r("nuxt-link",{staticClass:"basket-item__name",class:{"mt-0":!e.SKU_BLOCK_LIST},attrs:{to:e.DETAIL_PAGE_URL}},[t._v(t._s(e.NAME))]),t._v(" "),t._l(e.SKU_BLOCK_LIST,function(e){return r("div",{key:e.ID,ref:"sku_line_block",refInFor:!0,staticClass:"item__offers"},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[t._l(e.SKU_VALUES_LIST,function(e){return[e.SELECTED?r("li",{key:e.ID,class:{img:e.PICT},attrs:{"data-value":e.ID}},[e.PICT&&0!==e.PICT.ID?r("img",{attrs:{src:e.PICT,alt:"",title:e.NAME}}):t._e(),t._v(" "),e.PICT&&0!=e.PICT.ID?t._e():r("span",[t._v(t._s(e.NAME))])]):t._e()]})],2)])}),t._v(" "),t._l(e.PROPS,function(e){return["right"==e.CODE?r("div",{key:e.CODE,staticClass:"item__offers",staticStyle:{width:"100%"}},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[t.getPropValue(e["~VALUE"]).sph?r("li",[r("span",[t._v("sph: "+t._s(t.getPropValue(e["~VALUE"]).sph))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).cyl?r("li",[r("span",[t._v("cyl: "+t._s(t.getPropValue(e["~VALUE"]).cyl))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).ax?r("li",[r("span",[t._v("ax: "+t._s(t.getPropValue(e["~VALUE"]).ax))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).add?r("li",[r("span",[t._v("add: "+t._s(t.getPropValue(e["~VALUE"]).add))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).deg?r("li",[r("span",[t._v("deg: "+t._s(t.getPropValue(e["~VALUE"]).deg))])]):t._e()])]):t._e()]}),t._v(" "),t._l(e.PROPS,function(e){return["left"==e.CODE?r("div",{key:e.CODE,staticClass:"item__offers",staticStyle:{width:"100%"}},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[t.getPropValue(e["~VALUE"]).sph?r("li",[r("span",[t._v("sph: "+t._s(t.getPropValue(e["~VALUE"]).sph))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).cyl?r("li",[r("span",[t._v("cyl: "+t._s(t.getPropValue(e["~VALUE"]).cyl))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).ax?r("li",[r("span",[t._v("ax: "+t._s(t.getPropValue(e["~VALUE"]).ax))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).add?r("li",[r("span",[t._v("add: "+t._s(t.getPropValue(e["~VALUE"]).add))])]):t._e(),t._v(" "),t.getPropValue(e["~VALUE"]).deg?r("li",[r("span",[t._v("deg: "+t._s(t.getPropValue(e["~VALUE"]).deg))])]):t._e()])]):t._e()]}),t._v(" "),t._l(e.PROPS,function(e,o){return["center_distance_left"==e.CODE||"center_distance_right"==e.CODE?r("div",{key:o,staticClass:"item__offers"},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[r("li",[r("span",[t._v(t._s(e["~VALUE"]))])])])]):t._e()]}),t._v(" "),t._l(e.PROPS,function(e,o){return["service"==e.CODE?r("div",{key:o,staticClass:"item__offers"},[r("p",[t._v(t._s(e.NAME))]),t._v(" "),r("ul",[r("li",[r("span",[t._v(t._s(e["~VALUE"]))])])])]):t._e()]})],2)]),t._v(" "),r("div",{staticClass:"basket-item__o-quantity"},[t._v("\n                "+t._s(e.QUANTITY)+" шт.\n            ")]),t._v(" "),r("div",{staticClass:"basket-item__o-price"},[r("p",[t._v(t._s(e.SUM))])])])}):t._e()],2)},[],!1,null,null,null).exports,E={props:["promocode"],data:function(){return{code:""}},methods:{addPromocode:function(){""!=this.code&&this.$store.dispatch("basket/ADD_COUPON",this.code)},delPromo:function(text){this.$store.dispatch("basket/DELETE_CPUPON",text)}}},C=(r(372),Object(v.a)(E,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"promocode"},[r("label",{staticClass:"o-prop textfield promofield"},[r("span",[t._v("Применить купон:")]),t._v(" "),r("div",{staticClass:"promofield__wrapper"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text"},domProps:{value:t.code},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addPromocode(e))},input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),r("span",{staticClass:"promofield__button",on:{click:t.addPromocode}})])]),t._v(" "),t.promocode?r("ul",[t._l(t.promocode,function(code,e){return["Y"===code.ACTIVE?r("li",{key:e},[t._v("\n                "+t._s(code.COUPON)+"\n                "),r("span",{staticClass:"delete",on:{click:function(e){return t.delPromo(code.COUPON)}}})]):t._e()]})],2):t._e()])},[],!1,null,null,null).exports),f={props:["paysystem","promocode"],components:{Promocode:C},methods:{change:function(){this.$root.$emit("refresh")}}},O=Object(v.a)(f,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pay-system"},[r("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-4",modifiers:{"accordion-4":!0}}],staticClass:"order__heading",attrs:{type:"button",role:"tab"}},[r("b",[t._v("4. Оплата")]),t._v(" "),r("span",[t._v("Изменить")])]),t._v(" "),r("b-collapse",{attrs:{id:"accordion-4",accordion:"my-accordion",role:"tabpanel"}},[r("div",{staticClass:"pay-system__wrapper"},t._l(t.paysystem,function(e){return r("label",{key:e.ID,staticClass:"o-radio o-radio--img",class:{active:e.CHECKED}},[r("input",{attrs:{name:"PAY_SYSTEM_ID",type:"radio"},domProps:{checked:e.CHECKED,value:e.ID},on:{change:t.change}}),t._v(" "),e.PSA_LOGOTIP_SRC?r("img",{attrs:{src:e.PSA_LOGOTIP_SRC,alt:""}}):t._e(),t._v(" "),r("span",[t._v(t._s(e.NAME))])])}),0),t._v(" "),r("div",{staticClass:"order__next"},[r("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-4.accordion-5",modifiers:{"accordion-4":!0,"accordion-5":!0}}],staticClass:"button black",attrs:{type:"button"}},[t._v("Далее")])])]),t._v(" "),r("div",{staticClass:"order__short-info"},[t._l(t.paysystem,function(e){return[e.CHECKED?r("p",{key:e.ID},[e.PSA_LOGOTIP_SRC?r("img",{attrs:{src:e.PSA_LOGOTIP_SRC,alt:""}}):t._e(),t._v(" "),r("b",[t._v(t._s(e.NAME))])]):t._e()]})],2)],1)},[],!1,null,null,null).exports,P={props:["delivery","promocode"],components:{Promocode:C},methods:{change:function(){this.$root.$emit("refresh")}}},h=Object(v.a)(P,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"delivery"},[r("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-3",modifiers:{"accordion-3":!0}}],staticClass:"order__heading",attrs:{type:"button",role:"tab"}},[r("b",[t._v("3. Доставка")]),t._v(" "),r("span",[t._v("Изменить")])]),t._v(" "),r("b-collapse",{attrs:{id:"accordion-3",accordion:"my-accordion",role:"tabpanel"}},[r("div",{staticClass:"delivery__wrapper"},[r("div",{staticClass:"delivery__options"},t._l(t.delivery,function(e){return r("label",{key:e.ID,staticClass:"o-radio o-radio--img",class:{active:e.CHECKED}},[r("input",{attrs:{name:"DELIVERY_ID",type:"radio"},domProps:{checked:e.CHECKED,value:e.ID},on:{change:t.change}}),t._v(" "),e.LOGOTIP_SRC?r("img",{attrs:{src:e.LOGOTIP_SRC,alt:""}}):t._e(),t._v(" "),r("span",[t._v(t._s(e.NAME))])])}),0),t._v(" "),t._l(t.delivery,function(e){return[e.CHECKED?r("div",{key:e.ID,staticClass:"delivery__info"},[r("p",{staticClass:"delivery__name"},[t._v(t._s(e.NAME))]),t._v(" "),e.LOGOTIP_SRC?r("img",{attrs:{src:e.LOGOTIP_SRC,alt:""}}):t._e(),t._v(" "),e.DESCRIPTION?r("p",[t._v(t._s(e.DESCRIPTION))]):t._e(),t._v(" "),r("p",{staticClass:"delivery__prop"},[r("span",[t._v("Стоимость:")]),t._v(" "),r("span",[t._v(t._s(e.PRICE_FORMATED))])]),t._v(" "),r("p",{staticClass:"delivery__prop"},[r("span",[t._v("Срок доставки:")]),t._v(" "),r("span")])]):t._e()]})],2),t._v(" "),r("div",{staticClass:"order__next"},[r("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-3.accordion-4",modifiers:{"accordion-3":!0,"accordion-4":!0}}],staticClass:"button black",attrs:{type:"button"}},[t._v("Далее")])])]),t._v(" "),r("div",{staticClass:"order__short-info"},[t._l(t.delivery,function(e){return[e.CHECKED?r("p",{key:e.ID},[e.LOGOTIP_SRC?r("img",{attrs:{src:e.LOGOTIP_SRC,alt:""}}):t._e(),t._v(" "),r("b",[t._v(t._s(e.NAME))])]):t._e()]})],2)],1)},[],!1,null,null,null).exports,y=r(330),I={props:["property"],components:{Error:y.a},computed:Object(o.a)({},Object(l.b)({getError:"order/getErrorProperty"}),{message:function(){var t,e=!1;return(t=this.getError(this.property.ID))&&(e=t),e}})},A=Object(v.a)(I,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"o-prop textfield",class:{error:t.message}},[r("p",[t._v(t._s(t.property.NAME)+" *")]),t._v(" "),t._l(t.property.VALUE,function(e,o){return r("input",{key:o,staticClass:"o-prop__input",attrs:{name:"ORDER_PROP_"+t.property.ID},domProps:{value:e}})})],2)},[],!1,null,null,null).exports,L={props:["personType","promocode"],components:{String:A,Location:r(351).a,Promocode:C,Error:y.a},methods:{change:function(){this.$root.$emit("refresh")}},computed:Object(o.a)({},Object(l.b)({getProps:"order/getProperties",getLocationName:"order/getLocationName",hasErrors:"order/groupHasErrors"}))},D=Object(v.a)(L,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"person-type"},[r("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2",modifiers:{"accordion-2":!0}}],staticClass:"order__heading mt-0",class:{error:t.hasErrors(3)},attrs:{type:"button",role:"tab"}},[r("b",[t._v("2. Регион доставки")]),t._v(" "),r("span",[t._v("Изменить")])]),t._v(" "),r("b-collapse",{attrs:{id:"accordion-2",accordion:"my-accordion",role:"tabpanel",visible:""}},[r("div",[r("span",{staticClass:"person-type__label"},[t._v("Тип плательщика:")]),t._v(" "),t._l(t.personType,function(e){return r("label",{key:e.ID,staticClass:"o-radio",class:{active:e.CHECKED}},["Физическое лицо"==e.NAME?r("div",[r("input",{attrs:{name:"PERSON_TYPE",type:"radio"},domProps:{checked:e.CHECKED,value:e.ID},on:{change:t.change}}),t._v(" "),r("span",[t._v(t._s(e.NAME))]),t._v(" "),e.CHECKED?r("input",{attrs:{type:"hidden",name:"PERSON_TYPE_OLD"},domProps:{value:e.ID}}):t._e()]):t._e()])})],2),t._v(" "),r("div",{staticClass:"person-type__props o-prop-wrap"},[t._l(t.getProps,function(e){return["STRING"===e.TYPE&&"index"==e.CODE?r("string",{key:e.ID,attrs:{property:e}}):t._e(),t._v(" "),"LOCATION"===e.TYPE?r("location",{key:e.ID,attrs:{property:e}}):t._e()]})],2),t._v(" "),r("div",{staticClass:"order__next mt-3"},[r("promocode",{attrs:{promocode:t.promocode},on:{input:function(e){t.promocode=e}}}),t._v(" "),r("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2.accordion-3",modifiers:{"accordion-2":!0,"accordion-3":!0}}],staticClass:"button black",attrs:{type:"button"}},[t._v("Далее")])],1)]),t._v(" "),r("div",{staticClass:"order__short-info"},[t._l(t.getProps,function(e){return["location"==e.CODE?r("p",{key:e.ID},[r("b",[t._v(t._s(e.NAME)+":")]),t._v(" "),r("span",[t._v(t._s(t.getLocationName({id:1})))])]):t._e(),t._v(" "),"index"==e.CODE&&e.VALUE[0]?r("p",{key:e.ID},[r("b",[t._v(t._s(e.NAME)+":")]),t._v(" "),r("span",[t._v(t._s(e.VALUE[0]))])]):t._e(),t._v(" "),"index"!=e.CODE||e.VALUE[0]?t._e():r("div",{key:e.ID},[r("error",{attrs:{id:e.ID}})],1)]})],2)],1)},[],!1,null,null,null).exports,T={computed:Object(o.a)({},Object(l.b)({message:"order/getComment"}),{comment:{get:function(){return this.message},set:function(t){this.$parent.$emit("comment",t)}}})},R={components:{String:A,Comment:Object(v.a)(T,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"o-prop o-prop--100 textfield"},[r("p",[t._v("Комментарий")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{rows:"5",name:"ORDER_DESCRIPTION"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])},[],!1,null,null,null).exports,Error:y.a},computed:Object(o.a)({},Object(l.b)({getProps:"order/getProperties",hasErrors:"order/groupHasErrors"}))},V=Object(v.a)(R,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-5",modifiers:{"accordion-5":!0}}],staticClass:"order__heading",class:{error:t.hasErrors(4)},attrs:{type:"button",role:"tab"}},[r("b",[t._v("5. Покупатель")]),t._v(" "),r("span",[t._v("Изменить")])]),t._v(" "),r("b-collapse",{attrs:{id:"accordion-5",accordion:"my-accordion",role:"tabpanel"}},[r("div",{staticClass:"o-prop-wrap"},[t._l(t.getProps,function(e){return["STRING"===e.TYPE&&"index"!=e.CODE?r("string",{key:e.ID,attrs:{property:e}}):t._e()]})],2),t._v(" "),r("comment")],1),t._v(" "),r("div",{staticClass:"order__short-info"},[t._l(t.getProps,function(e){return["STRING"===e.TYPE&&"index"!=e.CODE&&e.VALUE[0]?r("p",{key:e.ID},[r("b",[t._v(t._s(e.NAME)+":")]),t._v(" "),r("span",[t._v(t._s(e.VALUE[0]))])]):t._e(),t._v(" "),"STRING"!==e.TYPE||"index"==e.CODE||e.VALUE[0]?t._e():r("div",{key:e.ID},[r("error",{attrs:{id:e.ID}})],1)]})],2)],1)},[],!1,null,null,null).exports,S=r(354),k={mixins:[c.a],components:{OrderItems:m,PaySystem:O,Delivery:h,PersonType:D,Properties:V,BasketItem:S.a},data:function(){return{orderId:!1}},methods:{getFormData:function(){var form=new FormData(this.$refs.form),t={},e=!0,r=!1,o=void 0;try{for(var n,l=form.entries()[Symbol.iterator]();!(e=(n=l.next()).done);e=!0){var c=Object(_.a)(n.value,2),d=c[0],v=c[1];t[d]=v}}catch(t){r=!0,o=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw o}}return t},save:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.yaCounter56402599.reachGoal("placeOrder"),this.$root.$emit("refresh"),t.next=4,setTimeout(function(){e.saveDate()},1e3);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveDate:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isEmptyBasket){t.next=12;break}return r={"soa-action":"saveOrderAjax"},(e=Object.assign(this.getFormData(),r)).receptSorce=localStorage.recept,t.next=6,this.$store.dispatch("order/request",e);case 6:if(!(o=t.sent).hasOwnProperty("ERROR")){t.next=9;break}return t.abrupt("return");case 9:this.isLogged||this.$store.dispatch("user/STATE"),this.orderId=o.order.ID,this.orderId&&this.$root.$emit("order");case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),refresh:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$store.dispatch("order/request",{order:this.getFormData(),"soa-action":"refreshOrderAjax",sessid:this.getSessid,via_ajax:"Y"});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){var t=this;this.$root.$on("refresh",function(e){t.refresh()})},computed:Object(o.a)({},Object(l.b)({getSessid:"order/getSessid",getOrder:"order/getOrder",isEmptyBasket:"order/isEmptyBasket",isLogged:"user/isLogged"}),{order:function(){return this.getOrder}})},N=(r(373),{components:{Order:Object(v.a)(k,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"content-header"},[r("div",{staticClass:"main-container"},[r("h2",[t._v("Оформление заказа")]),t._v(" "),r("ul",{staticClass:"breadcrumbs"},[r("li",[r("nuxt-link",{attrs:{to:"/"}},[t._v("Главная")])],1)])])]),t._v(" "),t.orderId?t._e():r("div",{staticClass:"order main-container"},[r("form",{ref:"form"},[r("input",{attrs:{type:"hidden",name:"sessid"},domProps:{value:t.getSessid}}),t._v(" "),r("input",{attrs:{type:"hidden",name:"BUYER_STORE",value:"0"}}),t._v(" "),r("div",{attrs:{role:"tablist"}},[r("order-items"),t._v(" "),t.getBasket.COUPON_LIST?r("person-type",{attrs:{personType:t.order.PERSON_TYPE,promocode:t.getBasket.COUPON_LIST}}):t._e(),t._v(" "),t.getBasket.COUPON_LIST?r("delivery",{attrs:{delivery:t.order.DELIVERY,promocode:t.getBasket.COUPON_LIST}}):t._e(),t._v(" "),t.getBasket.COUPON_LIST?r("pay-system",{staticClass:"order__pay-system",attrs:{paysystem:t.order.PAY_SYSTEM,promocode:t.getBasket.COUPON_LIST}}):t._e(),t._v(" "),r("properties")],1),t._v(" "),r("div",{staticClass:"order__submit hidden-mobile"},[r("button",{staticClass:"button black mt-3",attrs:{type:"button"},on:{click:t.save}},[t._v("Оформить заказ")])])]),t._v(" "),r("div",{staticClass:"order__total total"},[r("div",{staticClass:"total__row"},[r("div",[t._v("\n                    Товаров на:\n                ")]),t._v(" "),t.getOrder.TOTAL?r("div",{staticClass:"total__value"},[r("p",[t._v(t._s(t.getOrder.TOTAL.ORDER_PRICE_FORMATED))]),t._v(" "),t.getOrder.TOTAL.DISCOUNT_PRICE>0?r("p",[t._v(t._s(t.getOrder.TOTAL.PRICE_WITHOUT_DISCOUNT))]):t._e()]):t._e()]),t._v(" "),r("div",{staticClass:"total__row"},[r("div",[t._v("\n                    Доставка:\n                ")]),t._v(" "),t.getOrder.TOTAL?r("div",{staticClass:"total__value"},[r("p",[t._v(t._s(t.getOrder.TOTAL.DELIVERY_PRICE_FORMATED))])]):t._e()]),t._v(" "),t.getOrder.TOTAL&&t.getOrder.TOTAL.DISCOUNT_PRICE>0?r("div",{staticClass:"total__row"},[r("div",[t._v("\n                    Экономия:\n                ")]),t._v(" "),t.getOrder.TOTAL?r("div",{staticClass:"total__value"},[r("p",[t._v(t._s(t.getOrder.TOTAL.DISCOUNT_PRICE_FORMATED))])]):t._e()]):t._e(),t._v(" "),r("div",{staticClass:"total__row total__row--total"},[r("div",[t._v("\n                    Итого:\n                ")]),t._v(" "),t.getOrder.TOTAL?r("div",{staticClass:"total__value"},[r("p",[t._v(t._s(t.getOrder.TOTAL.ORDER_TOTAL_PRICE_FORMATED))])]):t._e()])]),t._v(" "),r("div",{staticClass:"order__submit hidden-desktop"},[r("button",{staticClass:"button black mt-3",attrs:{type:"button"},on:{click:t.save}},[t._v("Оформить заказ")])])]),t._v(" "),r("div",{attrs:{id:"compile"}},[t.orderId?r("div",{staticClass:"custom-page main-container"},[r("p",{staticClass:"big-text-bold"},[t._v("Ваш заказ №"+t._s(t.orderId)+" успешно создан.")]),t._v(" "),r("p",[t._v("Вы можете следить за выполнением своего заказа в "),r("nuxt-link",{staticStyle:{color:"#000"},attrs:{to:"/personal/orders"}},[t._v("Персональном разделе сайта")]),t._v(". Обратите внимание, что для входа в этот раздел вам необходимо будет ввести логин и пароль пользователя сайта.")],1),t._v(" "),"Y"===t.getOrder.PAY_SYSTEM[0].CHECKED?r("div",[r("a",{staticClass:"button black",attrs:{href:"https://home-optic.ru/api/v1/payment/?ORDER_ID="+t.orderId+"&PAYMENT_ID="+t.orderId+"/1/",target:"_blank"}},[t._v("Оплатить")])]):t._e()]):t._e()])])},[],!1,null,null,null).exports},head:function(){return{title:"Оформление заказа"}}}),U=Object(v.a)(N,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("order")],1)},[],!1,null,null,null);e.default=U.exports}}]);